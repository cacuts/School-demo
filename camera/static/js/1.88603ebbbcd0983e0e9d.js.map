{"version":3,"sources":["webpack:///./src/assets/images/cover.png","webpack:///src/pages/homePage/test2.vue","webpack:///./src/pages/homePage/test2.vue?e049","webpack:///./src/pages/homePage/test2.vue"],"names":["module","exports","__webpack_require__","p","test2","data","created","this","getCamera","methods","window","addEventListener","undefined","navigator","mediaDevices","alert","getUserMedia","constraints","webkitGetUserMedia","mozGetUserMedia","promise_default","a","resolve","reject","call","Error","audio","video","then","stream","document","querySelector","srcObject","src","URL","createObjectURL","onloadedmetadata","e","play","catch","err","name","message","getImage","canvas","console","log","width","videoWidth","height","videoHeight","getContext","drawImage","homePage_test2","render","_vm","_h","$createElement","_c","_self","staticStyle","position","left","bottom","top","right","attrs","_v","background","box-shadow","border-radius","margin-left","id","on","click","$event","autoplay","staticRenderFns","Component","normalizeComponent","__webpack_exports__"],"mappings":"uCAAAA,EAAAC,QAAiBC,EAAAC,EAAuB,4ICuCxCC,GACAC,KADA,WAEA,UAEAC,QAJA,WAIAC,KAAAC,aACAC,SACAD,UADA,WAIAE,OAAAC,iBACA,mBACA,gBAEAC,IAAAC,UAAAC,eACAD,UAAAC,gBACAC,MAAA,WAKAH,IAAAC,UAAAC,aAAAE,eACAH,UAAAC,aAAAE,aAAA,SAAAC,GACAF,MAAA,KAEA,IAAAC,EACAH,UAAAG,cACAH,UAAAK,oBACAL,UAAAM,gBAGA,OAAAH,EAOA,IAAAI,EAAAC,EAAA,SAAAC,EAAAC,GACAP,EAAAQ,KAAAX,UAAAI,EAAAK,EAAAC,KAPAH,EAAAC,EAAAE,OACA,IAAAE,MAAA,sDAcAZ,UAAAC,aACAE,cAHAU,OAAA,EAAAC,OAAA,IAIAC,KAAA,SAAAC,GACA,IAAAF,EAAAG,SAAAC,cAAA,SAEA,cAAAJ,EACAA,EAAAK,UAAAH,EAGAF,EAAAM,IAAAvB,OAAAwB,IAAAC,gBAAAN,GAEAF,EAAAS,iBAAA,SAAAC,GACAV,EAAAW,UAGAC,MAAA,SAAAC,GACAzB,MAAAyB,EAAAC,KAAA,KAAAD,EAAAE,aAGA,IAGAC,SA/DA,WAmEA,IAAAC,EAAAd,SAAAC,cAAA,aACAc,QAAAC,IAAAF,GAEA,IAAAjB,EAAAG,SAAAC,cAAA,SACAc,QAAAC,IAAAnB,GACAiB,EAAAG,MAAApB,EAAAqB,WACAJ,EAAAK,OAAAtB,EAAAuB,YACAN,EAAAO,WAAA,MAAAC,UAAAzB,EAAA,gBCnHe0B,GADEC,OAFjB,WAA0B,IAAAC,EAAAhD,KAAaiD,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAAA,EAAA,OAA2BE,aAAab,MAAA,OAAAc,SAAA,QAAAC,KAAA,IAAAC,OAAA,IAAAC,IAAA,IAAAC,MAAA,OAAiFP,EAAA,OAAYE,aAAab,MAAA,QAAAE,OAAA,QAAAY,SAAA,QAAAC,KAAA,IAAAC,OAAA,IAAAC,IAAA,IAAAC,MAAA,KAAkGC,OAAQjC,IAAM/B,EAAQ,WAAkCqD,EAAAY,GAAA,KAAAT,EAAA,UAA2BE,aAAab,MAAA,OAAAE,OAAA,OAAAmB,WAAA,OAAAC,aAAA,eAAAC,gBAAA,OAAAT,SAAA,QAAAE,OAAA,OAAAD,KAAA,MAAAS,cAAA,SAA4KL,OAAQM,GAAA,QAAYC,IAAKC,MAAA,SAAAC,GAAyB,OAAApB,EAAAZ,eAAwBY,EAAAY,GAAA,KAAAT,EAAA,SAA0BQ,OAAOU,SAAA,MAAerB,EAAAY,GAAA,KAAAT,EAAA,UAA2BQ,OAAOM,GAAA,mBAEpuBK,oBCYjBC,EAdyB5E,EAAQ,OAcjC6E,CACE3E,EACAiD,GATF,EAEA,KAEA,KAEA,MAUe2B,EAAA,QAAAF,EAAiB","file":"static/js/1.88603ebbbcd0983e0e9d.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/img/cover.971ac11.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/images/cover.png\n// module id = jYke\n// module chunks = 1","<template>\r\n  <div>\r\n    <div\r\n      style=\"width: 100%; position: fixed; left: 0; bottom: 0; top: 0; right: 0\"\r\n    >\r\n      <img\r\n        src=\"../../assets/images/cover.png\"\r\n        style=\"\r\n          width: 300px;\r\n          height: 150px;\r\n          position: fixed;\r\n          left: 0;\r\n          bottom: 0;\r\n          top: 0;\r\n          right: 0;\r\n        \"\r\n      />\r\n      <button\r\n        id=\"snap\"\r\n        style=\"\r\n          width: 50px;\r\n          height: 50px;\r\n          background: #fff;\r\n          box-shadow: 0 0 5px #fff;\r\n          border-radius: 50px;\r\n          position: fixed;\r\n          bottom: 20px;\r\n          left: 50%;\r\n          margin-left: -25px;\r\n        \"\r\n        @click=\"getImage()\"\r\n      ></button>\r\n      <video autoplay></video>\r\n      <canvas id=\"mycanvas\"></canvas>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  data() {\r\n    return {};\r\n  },\r\n  created(){this.getCamera();},\r\n  methods: {\r\n    getCamera() {\r\n      // 注意本例需要在HTTPS协议网站中运行，新版本Chrome中getUserMedia接口在http下不再支持。\r\n      // 设置事件监听器\r\n      window.addEventListener(\r\n        \"DOMContentLoaded\",\r\n        function () {\r\n          // 老的浏览器可能根本没有实现 mediaDevices，所以我们可以先设置一个空的对象\r\n          if (navigator.mediaDevices === undefined) {\r\n            navigator.mediaDevices = {};\r\n            alert(\"1\");\r\n          }\r\n\r\n          // 一些浏览器部分支持 mediaDevices。我们不能直接给对象设置 getUserMedia\r\n          // 因为这样可能会覆盖已有的属性。这里我们只会在没有getUserMedia属性的时候添加它。\r\n          if (navigator.mediaDevices.getUserMedia === undefined) {\r\n            navigator.mediaDevices.getUserMedia = function (constraints) {\r\n              alert(\"2\");\r\n              // 首先，如果有getUserMedia的话，就获得它\r\n              var getUserMedia =\r\n                navigator.getUserMedia ||\r\n                navigator.webkitGetUserMedia ||\r\n                navigator.mozGetUserMedia;\r\n\r\n              // 一些浏览器根本没实现它 - 那么就返回一个error到promise的reject来保持一个统一的接口\r\n              if (!getUserMedia) {\r\n                return Promise.reject(\r\n                  new Error(\"getUserMedia is not implemented in this browser\")\r\n                );\r\n              }\r\n\r\n              // 否则，为老的navigator.getUserMedia方法包裹一个Promise\r\n              return new Promise(function (resolve, reject) {\r\n                getUserMedia.call(navigator, constraints, resolve, reject);\r\n              });\r\n            };\r\n          }\r\n          \r\n\r\n          var constraints = { audio: false, video: true };\r\n\r\n          navigator.mediaDevices\r\n            .getUserMedia(constraints)\r\n            .then(function (stream) {\r\n              var video = document.querySelector(\"video\");\r\n              // 旧的浏览器可能没有srcObject\r\n              if (\"srcObject\" in video) {\r\n                video.srcObject = stream;\r\n              } else {\r\n                // 防止在新的浏览器里使用它，应为它已经不再支持了\r\n                video.src = window.URL.createObjectURL(stream);\r\n              }\r\n              video.onloadedmetadata = function (e) {\r\n                video.play();\r\n              };\r\n            })\r\n            .catch(function (err) {\r\n              alert(err.name + \": \" + err.message);\r\n            });\r\n        },\r\n        false\r\n      );\r\n    },\r\n    getImage(){\r\n    //     var snap = document.querySelector('#snap');\r\n    // if(snap !== null){\r\n    //     snap.onclick=function(){\r\n            var canvas = document.querySelector('#mycanvas');\r\n            console.log(canvas);\r\n            // var ctx = canvas.getContext('2d');\r\n            var video = document.querySelector('video');\r\n            console.log(video);\r\n            canvas.width = video.videoWidth;\r\n            canvas.height = video.videoHeight;\r\n            canvas.getContext('2d').drawImage(video,0,0,200,200);\r\n\r\n            // canvas.toBlob(function(blob){\r\n            //     // var runtimeForRuid = new WebUploader.Runtime.Runtime();\r\n            //     // console.log(runtimeForRuid.uid);\r\n            //     // blob.name = runtimeForRuid.uid;\r\n            //     console.log(blob);\r\n            //     // var myFile = new WebUploader.Lib.File(runtimeForRuid.uid,blob);\r\n            //     // var wuFile = new WebUploader.File(myFile);\r\n            //     // console.log(wuFile);                \r\n            //     // uploader.addFile(wuFile);\r\n            // });\r\n           \r\n            //var myFile = new File(myBlob,\"snap.png\");\r\n            \r\n    //     }\r\n    // }\r\n\r\n    }\r\n  },\r\n};\r\n</script>\n\n\n// WEBPACK FOOTER //\n// src/pages/homePage/test2.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('div',{staticStyle:{\"width\":\"100%\",\"position\":\"fixed\",\"left\":\"0\",\"bottom\":\"0\",\"top\":\"0\",\"right\":\"0\"}},[_c('img',{staticStyle:{\"width\":\"300px\",\"height\":\"150px\",\"position\":\"fixed\",\"left\":\"0\",\"bottom\":\"0\",\"top\":\"0\",\"right\":\"0\"},attrs:{\"src\":require(\"../../assets/images/cover.png\")}}),_vm._v(\" \"),_c('button',{staticStyle:{\"width\":\"50px\",\"height\":\"50px\",\"background\":\"#fff\",\"box-shadow\":\"0 0 5px #fff\",\"border-radius\":\"50px\",\"position\":\"fixed\",\"bottom\":\"20px\",\"left\":\"50%\",\"margin-left\":\"-25px\"},attrs:{\"id\":\"snap\"},on:{\"click\":function($event){return _vm.getImage()}}}),_vm._v(\" \"),_c('video',{attrs:{\"autoplay\":\"\"}}),_vm._v(\" \"),_c('canvas',{attrs:{\"id\":\"mycanvas\"}})])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-22813fc1\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/homePage/test2.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./test2.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./test2.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-22813fc1\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./test2.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/homePage/test2.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}